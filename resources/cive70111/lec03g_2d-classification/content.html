<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Classification</title>
    <script src="../phoebe-js/mathhelper.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../phoebe-js/phoebe.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="iframe-content">
        <div class="container">

        <div class="infotab">
            <div class="infotab-header">
                <!-- Tab buttons will be auto-generated -->
            </div>
            <div class="infotab-content">
                <div class="infotab-panel" data-tab-title="Introduction">
                    Classification problems involve predicting which category or class an input belongs to. In 2D binary classification, we have two features (X‚ÇÅ and X‚ÇÇ) and need to separate data points into two classes.<br><br>

                    In civil engineering, this could represent:<br>
                    ‚Ä¢ <em>Soil stability:</em> Classifying soil samples as "stable" or "unstable" based on moisture content and density<br>
                    ‚Ä¢ <em>Structural safety:</em> Categorizing bridge components as "safe" or "requires inspection" based on load and age<br>
                    ‚Ä¢ <em>Traffic flow:</em> Predicting "congested" vs "free-flowing" traffic based on time of day and weather conditions<br><br>

                    The goal is to find a decision boundary that best separates the two classes, minimizing classification errors.
                </div>

                <div class="infotab-panel" data-tab-title="Instructions">
                    ‚Ä¢ Select boundary type (linear/quadratic), adjust weight parameters, and use <em>"Find Optimal Solution"</em> to optimize<br>
                    ‚Ä¢ Load sample datasets or add points by clicking the plot‚Äîuse "Click adds" boxes to choose class (red circles or teal squares)<br>
                    ‚Ä¢ Observe three boundary lines: red solid (high confidence Class 0), magenta dotted (decision boundary at 50%), teal solid (high confidence Class 1)<br>
                    ‚Ä¢ Background shading shows probability surface - darker shading indicates higher model confidence<br><br>

                    <strong>When does a linear boundary suffice, and when do you need a quadratic boundary? Try the sample datasets to explore.</strong>
                </div>

                <div class="infotab-panel" data-tab-title="Visual Guide">
                    ‚Ä¢ <strong class="text-salmon">Red circles:</strong> Class 0 data points<br>
                    ‚Ä¢ <strong class="text-teal">Teal squares:</strong> Class 1 data points<br>
                    ‚Ä¢ <em class="text-salmon">Red solid line:</em> High confidence Class 0 threshold (25% probability)<br>
                    ‚Ä¢ <em class="text-magenta">Magenta dotted line:</em> Decision boundary (50% probability - separates the two classes)<br>
                    ‚Ä¢ <em class="text-teal">Teal solid line:</em> High confidence Class 1 threshold (75% probability)<br>
                    ‚Ä¢ <em>Background shading:</em> Probability surface (faint red = likely Class 0, faint teal = likely Class 1, intensity shows confidence)<br>
                    ‚Ä¢ <em>Linear boundary:</em> Uses Œ∏‚ÇÄ, Œ∏‚ÇÅ, Œ∏‚ÇÇ ‚Üí Straight line boundary<br>
                    ‚Ä¢ <em>Quadratic boundary:</em> Uses Œ∏‚ÇÄ, Œ∏‚ÇÅ, Œ∏‚ÇÇ, Œ∏‚ÇÅ‚ÇÅ, Œ∏‚ÇÇ‚ÇÇ, Œ∏‚ÇÅ‚ÇÇ ‚Üí Curved boundaries (ellipses, parabolas)<br>
                </div>

                <div class="infotab-panel" data-tab-title="Tips">
                    ‚Ä¢ Start with linear boundaries for linearly separable data<br>
                    ‚Ä¢ Use quadratic boundaries when data forms curved patterns<br>
                    ‚Ä¢ The "Find Optimal Solution" button uses gradient descent to minimize loss<br>
                    ‚Ä¢ <em>Accuracy:</em> Percentage of correctly classified points (higher is better)<br>
                    ‚Ä¢ <em>Loss:</em> Cross-entropy loss measuring prediction confidence (lower is better)<br>
                    ‚Ä¢ Perfect separation: Loss approaches 0, accuracy approaches 100%<br>
                    ‚Ä¢ Overfitting risk: Complex boundaries may not generalize to new data<br>
                    ‚Ä¢ Use simpler boundaries (linear) when interpretability is important<br>
                    ‚Ä¢ Complex boundaries may be needed for real-world civil engineering data<br>
                    ‚Ä¢ Always validate on separate test data to check generalization
                </div>
            </div>
        </div>

        <div class="demo-area">
            <div class="left-column-wrapper">
                <div class="plot-container">
                    <div class="plot-stage plot-stage--w-full plot-stage--h-400">
                        <canvas id="plot"></canvas>
                        <canvas id="overlay-canvas" class="plot-overlay"></canvas>
                    </div>
                </div>

                <!-- Equation Display -->
                <div class="metriclabel" id="equation">
                    f(x) = œÉ(0.0 + 0.1x‚ÇÅ + 0.1x‚ÇÇ)
                </div>

                <!-- Data Buttons Panel and Class Selector -->
                <div class="control-row">
                    <div class="data-buttons-panel">
                        <button class="data-btn" id="generate-data-btn">Generate New Data</button>
                        <button class="data-btn" id="clear-data-btn">Clear All Data</button>
                        <button class="data-btn solution-btn" id="solution-btn">Find Optimal Solution</button>
                    </div>

                    <!-- Class Selector Panel -->
                    <div class="fancybox-panel">
                        <h4>Click adds:</h4>
                        <div class="fancybox-container">
                            <div class="fancybox" data-type="0" data-color="red" data-label="Class 0">
                                <svg class="fancybox-graphic" viewBox="0 0 60 60" width="45" height="45">
                                    <circle cx="30" cy="30" r="18" fill="none" stroke="currentColor" stroke-width="3"/>
                                </svg>
                            </div>
                            <div class="fancybox active" data-type="1" data-color="teal" data-label="Class 1">
                                <svg class="fancybox-graphic" viewBox="0 0 60 60" width="45" height="45">
                                    <rect x="12" y="12" width="36" height="36" rx="4" fill="none" stroke="currentColor" stroke-width="3"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dataset loading section -->
                <div class="dataset-buttons-section">
                    <label class="dataset-section-label">Sample Datasets:</label>
                    <div class="dataset-buttons">
                        <button class="dataset-btn structures-btn" id="structures-btn">Structures</button>
                        <button class="dataset-btn geotech-btn" id="geotech-btn">Geotechnics</button>
                        <button class="dataset-btn transport-btn" id="transport-btn">Transport</button>
                        <button class="dataset-btn environment-btn" id="environment-btn">Environment</button>
                    </div>

                    <div class="dataset-info-box" id="dataset-info-box">
                        <div class="dataset-info-title" id="dataset-info-title"></div>
                        <div class="dataset-info-description" id="dataset-info-description"></div>
                        <div class="dataset-info-variables" id="dataset-info-variables"></div>
                    </div>
                </div>

            </div>

            <div class="controls">
                <div class="control-group">
                    <label class="control-label-strong">Decision Boundary Type</label>
                    <div class="selector-grid">
                        <div class="selectorbox active" data-color="blue" data-boundary="linear" data-icon="üìè" data-label="Linear"></div>
                        <div class="selectorbox" data-color="orange" data-boundary="quadratic" data-icon="„Ä∞Ô∏è" data-label="Quadratic"></div>
                    </div>
                </div>

                <!-- Metrics Display -->
                <div class="control-group">
                    <div class="metriclabel" id="accuracy">Accuracy = 0.0%</div>
                </div>

                <div class="control-group">
                    <div class="metriclabel" id="loss">Loss = 0.0</div>
                </div>

                <!-- Linear parameters (shown for linear, quadratic, polynomial) -->
                <div class="control-group" id="w1-group">
                    <label for="w1">$\theta_0$</label>
                    <div class="slider-container">
                        <input type="range" id="bias" min="-10" max="10" step="0.1" value="0.0">
                        <div class="value-display" id="bias-value">0.0</div>
                    </div>
                </div>

                <div class="control-group" id="w2-group">
                    <label for="w2">$\theta_1$ ($x_1$)</label>
                    <div class="slider-container">
                        <input type="range" id="w1" min="-5" max="5" step="0.1" value="0.1">
                        <div class="value-display" id="w1-value">0.1</div>
                    </div>
                </div>

                <div class="control-group" id="bias-group">
                    <label for="bias">$\theta_2$ ($x_2$)</label>
                    <div class="slider-container">
                        <input type="range" id="w2" min="-5" max="5" step="0.1" value="0.1">
                        <div class="value-display" id="w2-value">0.1</div>
                    </div>
                </div>

                <!-- Additional parameters for nonlinear boundaries -->
                <div class="control-group is-hidden" id="w11-group">
                    <label for="w11">$\theta_{11}$ ($x_1^2$)</label>
                    <div class="slider-container">
                        <input type="range" id="w11" min="-2" max="2" step="0.1" value="0.0">
                        <div class="value-display" id="w11-value">0.0</div>
                    </div>
                </div>

                <div class="control-group is-hidden" id="w22-group">
                    <label for="w22">$\theta_{22}$ ($x_2^2$)</label>
                    <div class="slider-container">
                        <input type="range" id="w22" min="-2" max="2" step="0.1" value="0.0">
                        <div class="value-display" id="w22-value">0.0</div>
                    </div>
                </div>

                <div class="control-group is-hidden" id="w12-group">
                    <label for="w12">$\theta_{12}$ ($x_1x_2$)</label>
                    <div class="slider-container">
                        <input type="range" id="w12" min="-2" max="2" step="0.1" value="0.0">
                        <div class="value-display" id="w12-value">0.0</div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Theory Section -->
        <div class="theory-section is-hidden">
            <h3>Mathematical Foundations</h3>
            <p>
                <strong>Logistic Regression in 2D</strong> uses the sigmoid function to map any decision function to a probability between 0 and 1:
                $$P(y=1 \mid \mathbf{x}) = \sigma(f(\mathbf{x})) = \frac{1}{1 + e^{-f(\mathbf{x})}}$$<br>

                where $f(\mathbf{x})$ is the <strong>decision function</strong> that depends on the boundary type.<br><br>

                <strong>Linear Decision Boundary:</strong> The simplest case uses a linear decision function:
                $$z = \theta_0 + \theta_1x_1 + \theta_2x_2$$<br>

                The decision boundary occurs where $z = 0$ (where probability equals 0.5), which forms a straight line in 2D space. Points on one side of this line are classified as class 1, points on the other side as class 0. The parameters $\theta_1$ and $\theta_2$ control the orientation (slope) of the boundary, while the bias $\theta_0$ controls its position (intercept).<br><br>

                <strong>Quadratic Decision Boundary:</strong> For non-linearly separable data, we can use quadratic terms to create curved boundaries:
                $$z = \theta_0 + \theta_1x_1 + \theta_2x_2 + \theta_{11}x_1^2 + \theta_{22}x_2^2 + \theta_{12}x_1x_2$$<br>

                This allows the decision boundary to form ellipses, parabolas, or hyperbolas depending on the learned parameters. The quadratic terms $\theta_{11}x_1^2$ and $\theta_{22}x_2^2$ create curvature along each axis, while the interaction term $\theta_{12}x_1x_2$ allows for rotated or skewed boundaries.<br><br>

                <strong>Training and Optimization:</strong> As with 1D classification, we train using cross-entropy loss:
                $$J(\boldsymbol{\theta}) = -\frac{1}{m}\sum_{i=1}^{m}\left[y^{(i)}\log(h(\mathbf{x}^{(i)})) + (1-y^{(i)})\log(1-h(\mathbf{x}^{(i)}))\right]$$<br>

                and optimize using gradient descent. The "Find Optimal Solution" button in this demo uses gradient descent to minimize cross-entropy loss for the selected boundary type.<br><br>

                <strong>Practical guidance:</strong> Start with linear boundaries for linearly separable data‚Äîthey are simpler, more interpretable, and less prone to overfitting. Use quadratic (or higher-order) boundaries when data exhibits curved separation patterns that cannot be captured by a straight line. Always validate on separate test data to ensure the model generalizes beyond the training set. For engineering applications where interpretability matters, prefer simpler (linear) boundaries when performance is comparable.
            </p>
        </div>

        <p class="demo-credits">
            Developed by <a href="https://transport-systems.imperial.ac.uk/members/qu-k" target="_blank">Kevin Yu</a> & <a href="https://transport-systems.imperial.ac.uk/members/angeloudis-p" target="_blank">Panagiotis Angeloudis</a>
        </p>

    </div>
    </div>

    <script src="../phoebe-js/infotab.js"></script>
    <script src="../phoebe-js/metriclabel.js"></script>
    <script src="script.js"></script>
</body>
</html>

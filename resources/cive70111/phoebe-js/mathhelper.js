window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0},chtml:{displayAlign:"center",displayIndent:"0",mtextInheritFont:!0,merrorInheritFont:!0,mathmlSpacing:!1,exFactor:.5,scale:1.2,minScale:.8,matchFontHeight:!1},startup:{ready(){MathJax.startup.defaultReady();const style=document.createElement("style");style.textContent='\n                mjx-container[jax="CHTML"] {\n                    margin: 0 !important;\n                    padding: 0 !important;\n                    line-height: inherit !important;\n                }\n                mjx-container[jax="CHTML"][display="true"] {\n                    margin: 0 !important;\n                    padding: 0 !important;\n                }\n            ',document.head.appendChild(style)}},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code","annotation","annotation-xml"],processHtmlClass:"tex2jax_process",ignoreHtmlClass:"tex2jax_ignore",renderActions:{addMenu:[0,"",""]}}};class MathHelper{static async waitForReady(){if(!window.MathJax)throw new Error("MathJax not available");if(window.MathJax.startup&&window.MathJax.startup.promise)try{await window.MathJax.startup.promise}catch(error){throw console.warn("MathJax startup failed:",error),error}}static isAvailable(){return!(!window.MathJax||!window.MathJax.typesetPromise)}static async renderElements(elements){if(this.isAvailable())try{await this.waitForReady();const elementsArray=Array.isArray(elements)?elements:[elements];window.MathJax.typesetPromise&&await window.MathJax.typesetPromise(elementsArray)}catch(error){console.warn("MathJax render failed:",error)}else console.warn("MathJax not available, skipping render")}static async renderAll(){if(this.isAvailable())try{await this.waitForReady(),window.MathJax.typesetPromise&&await window.MathJax.typesetPromise()}catch(error){console.warn("MathJax render failed:",error)}else console.warn("MathJax not available, skipping render")}static async initializeDisplay(updateDisplayMathJax,updateDisplayPlainText){updateDisplayPlainText&&updateDisplayPlainText();try{await this.waitForReady(),updateDisplayMathJax&&updateDisplayMathJax()}catch(error){console.warn("MathJax initialization failed, using plain text fallback:",error)}}static clearElement(element){element&&(window.MathJax&&window.MathJax.typesetClear&&window.MathJax.typesetClear([element]),element.innerHTML="")}static async tex2html(tex,inline=!0){if(!this.isAvailable())return tex;try{if(await this.waitForReady(),window.MathJax.tex2svg){return window.MathJax.tex2svg(tex,{display:!inline}).outerHTML}if(window.MathJax.tex2chtml){return window.MathJax.tex2chtml(tex,{display:!inline}).outerHTML}return tex}catch(error){return console.warn("tex2html failed:",error),tex}}static async updateElement(elementId,tex,inline=!1){const element=document.getElementById(elementId);element?(element.innerHTML=inline?`\\(${tex}\\)`:`$$${tex}$$`,await this.renderElements(element)):console.warn(`Element ${elementId} not found`)}static polynomialToTex(coefficients,varName="x",decimals=2){if(0===coefficients.length)return"0";const terms=[];for(let i=0;i<coefficients.length;i++){const coef=coefficients[i];if(Math.abs(coef)<1e-10)continue;const coefStr=coef.toFixed(decimals),sign=coef>=0?"+":"";0===i?terms.push(coefStr):1===i?terms.push(`${sign} ${coefStr}${varName}`):terms.push(`${sign} ${coefStr}${varName}^{${i}}`)}if(0===terms.length)return"0";let equation=terms.join(" ");return equation=equation.replace(/^\+\s*/,""),equation}static formatNumber(value,decimals=2,useScientific=!1){if(Math.abs(value)<1e-10)return"0";if(useScientific||Math.abs(value)>=1e6||Math.abs(value)<.001){const exp=Math.floor(Math.log10(Math.abs(value)));return`${(value/Math.pow(10,exp)).toFixed(decimals)} \\times 10^{${exp}}`}return value.toFixed(decimals)}}
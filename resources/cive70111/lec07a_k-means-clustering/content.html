<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Means Clustering</title>
    <script src="../phoebe-js/mathhelper.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../phoebe-js/phoebe.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="iframe-content">
        <div class="container">

        <div class="infotab">
            <div class="infotab-header">
            </div>
            <div class="infotab-content">
                <div class="infotab-panel active" data-tab-title="Introduction">
                    <h3>K-Means Clustering</h3>
                    <p>K-means is one of the most popular unsupervised machine learning algorithms for clustering data into groups. It partitions data into k clusters by finding centroids that minimize the within-cluster sum of squared distances.</p>

                    <p>This algorithm is widely used in:</p>
                    <ul>
                        <li><strong>Market segmentation</strong> - grouping customers by behavior</li>
                        <li><strong>Image processing</strong> - color quantization and compression</li>
                        <li><strong>Data mining</strong> - discovering patterns in large datasets</li>
                        <li><strong>Civil engineering</strong> - analyzing spatial patterns in infrastructure data</li>
                    </ul>

                    <p>The algorithm is iterative and guaranteed to converge, though not necessarily to the global optimum.</p>
                </div>

                <div class="infotab-panel" data-tab-title="Theory">
                    <h3>Mathematical Foundation</h3>

                    <p>K-means minimizes the within-cluster sum of squared distances (WCSS):</p>

                    <div class="metriclabel-block">
                        $$J = \sum_{i=1}^{k} \sum_{x \in C_i} ||x - \mu_i||^2$$
                    </div>

                    <p>Where:</p>
                    <ul>
                        <li>$k$ = number of clusters</li>
                        <li>$C_i$ = set of points in cluster $i$</li>
                        <li>$\mu_i$ = centroid of cluster $i$</li>
                        <li>$||x - \mu_i||^2$ = squared Euclidean distance</li>
                    </ul>

                    <p><strong>Algorithm Steps:</strong></p>
                    <ol>
                        <li><strong>Initialize:</strong> Place $k$ centroids randomly: $\mu_1, \mu_2, ..., \mu_k$</li>
                        <li><strong>Assign:</strong> For each point $x_j$, assign to nearest centroid:
                            $$c_j = \arg\min_i ||x_j - \mu_i||^2$$</li>
                        <li><strong>Update:</strong> Recalculate centroids as cluster means:
                            $$\mu_i = \frac{1}{|C_i|} \sum_{x \in C_i} x$$</li>
                        <li><strong>Repeat:</strong> Steps 2-3 until convergence (centroids stop moving)</li>
                    </ol>

                    <p><strong>Convergence:</strong> The algorithm converges when centroids no longer change position between iterations, or the change is below a threshold.</p>
                </div>

                <div class="infotab-panel" data-tab-title="Instructions">
                    <h3>How to Use This Demo</h3>

                    <p><strong>Basic Controls:</strong></p>
                    <ul>
                        <li><strong>Adjust K slider</strong> - Change the number of clusters to see different groupings</li>
                        <li><strong>Step Forward</strong> - Run one iteration of the algorithm</li>
                        <li><strong>Final Results</strong> - Run until convergence</li>
                        <li><strong>Reset Training</strong> - Reset algorithm state (keeps data points)</li>
                        <li><strong>Generate New Data</strong> - Create fresh random data points</li>
                    </ul>

                    <p><strong>Interactive Features:</strong></p>
                    <ul>
                        <li><strong>Add data points</strong> - Enable "Adding Data Points" and click anywhere on the plot</li>
                        <li><strong>Drag centroids</strong> - Click and drag the solid circles to manually position centroids</li>
                        <li><strong>Show distance lines</strong> - Toggle to always show connections between points and centroids</li>
                        <li><strong>Hover effects</strong> - Hover over centroids to see their cluster connections</li>
                    </ul>

                    <p><strong>Visualization Guide:</strong></p>
                    <ul>
                        <li><em>Hollow circles:</em> Data points, colored by cluster assignment</li>
                        <li><em>Solid circles:</em> Centroids showing cluster centers</li>
                        <li><em>Colors:</em> Each cluster has a unique color</li>
                        <li><em>Lines:</em> Connect points to their assigned centroids</li>
                    </ul>
                </div>

                <div class="infotab-panel" data-tab-title="Tips">
                    <h3>Understanding K-Means</h3>

                    <p><strong>Choosing K:</strong></p>
                    <ul>
                        <li>Try different values of K to see how cluster quality changes</li>
                        <li>Too few clusters may miss important patterns</li>
                        <li>Too many clusters may overfit to noise</li>
                        <li>In practice, use methods like the "elbow method" or silhouette analysis</li>
                    </ul>

                    <p><strong>Algorithm Behavior:</strong></p>
                    <ul>
                        <li>Initial centroid placement affects final results</li>
                        <li>K-means finds spherical clusters (assumption of similar variance)</li>
                        <li>Sensitive to outliers - they can pull centroids away from natural centers</li>
                        <li>Always converges, but may find local optima</li>
                    </ul>

                    <p><strong>Practical Considerations:</strong></p>
                    <ul>
                        <li>Scale your features before applying k-means</li>
                        <li>Run multiple times with different initializations</li>
                        <li>Consider k-means++ for smarter initialization</li>
                        <li>Validate results with domain knowledge</li>
                    </ul>

                    <p><strong>Experiment Ideas:</strong></p>
                    <ul>
                        <li>Add points in obvious clusters and see if k-means finds them</li>
                        <li>Try dragging centroids to suboptimal positions</li>
                        <li>Create elongated or irregular shaped clusters</li>
                        <li>Observe how outliers affect the clustering</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="demo-area">
            <div class="plot-container">
                <div style="position: relative; width: 550px; height: 600px;">
                    <canvas id="plot" style="width: 100%; height: 100%;"></canvas>
                    <canvas id="overlay-canvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: transparent; z-index: 1;"></canvas>
                </div>

                <div class="dataset-buttons-section">
                    <label class="dataset-section-label">Sample Datasets:</label>
                    <div class="dataset-buttons">
                        <button class="dataset-btn structures-btn" id="structures-btn">Structures</button>
                        <button class="dataset-btn geotech-btn" id="geotech-btn">Geotechnics</button>
                        <button class="dataset-btn transport-btn" id="transport-btn">Transport</button>
                        <button class="dataset-btn environment-btn" id="environment-btn">Environment</button>
                    </div>

                    <div class="dataset-info-box" id="dataset-info-box">
                        <div class="dataset-info-title" id="dataset-info-title"></div>
                        <div class="dataset-info-description" id="dataset-info-description"></div>
                        <div class="dataset-info-variables" id="dataset-info-variables"></div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label for="k-clusters">Number of Clusters (K)</label>
                    <div class="slider-container">
                        <input type="range" id="k-clusters" min="2" max="10" step="1" value="3">
                        <div class="value-display" id="k-value">3</div>
                    </div>
                </div>


                <div class="control-group">
                    <label>
                        <input type="checkbox" id="add-data-mode" style="margin-right: 8px;" checked>
                        Enable Adding Data Points
                    </label>
                </div>

                <div class="control-group">
                    <div class="plot-buttons">
                        <button id="step-btn" class="generate-data-btn">Step Forward</button>
                        <button id="final-btn" class="solution-btn">Final Results</button>
                        <button id="reset-btn" class="clear-data-btn">Reset Training</button>
                        <button id="generate-data-btn" class="generate-data-btn">Generate New Data</button>
                    </div>
                </div>

                <div class="control-group">
                    <div class="display-group">
                        <div class="display-item">
                            <label>Current Iteration:</label>
                            <span id="iteration-display" class="value-display">0</span>
                        </div>
                        <div class="display-item">
                            <label>Status:</label>
                            <span id="status-display" class="value-display">Ready</span>
                        </div>
                        <div class="display-item">
                            <label>Data Points:</label>
                            <span id="points-count" class="value-display">20</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <div class="metriclabel">
                        Objective: $\min \sum_{i=1}^{k} \sum_{x \in C_i} ||x - \mu_i||^2$
                    </div>
                    <div class="metriclabel-description">
                        Minimize within-cluster sum of squared distances
                    </div>
                </div>
            </div>
        </div>

        </div>
    </div>

    <script src="../phoebe-js/infotab.js"></script>
    <script src="script.js?v=2"></script>
</body>
</html>